# Backstage.io App Configuration for FixOps Integration\n# Add this to your bank's Backstage app-config.yaml\n\napp:\n  title: Bank Developer Portal\n  baseUrl: https://backstage.bank.internal\n\norganization:\n  name: Bank Platform Engineering\n\nbackend:\n  baseUrl: https://backstage.bank.internal\n  listen:\n    port: 7007\n  csp:\n    connect-src: [\"'self'\", 'http:', 'https:']\n  cors:\n    origin: https://backstage.bank.internal\n    methods: [GET, HEAD, PATCH, POST, PUT, DELETE]\n    credentials: true\n  database:\n    client: pg\n    connection:\n      host: postgres.backstage.internal\n      port: 5432\n      user: backstage\n      password: ${POSTGRES_PASSWORD}\n      database: backstage\n\nintegrations:\n  github:\n    - host: git.bank.internal\n      token: ${GITHUB_TOKEN}\n      \n  gitlab:\n    - host: gitlab.bank.internal\n      token: ${GITLAB_TOKEN}\n      \nauth:\n  # Use bank's SSO\n  providers:\n    oidc:\n      development:\n        clientId: ${OIDC_CLIENT_ID}\n        clientSecret: ${OIDC_CLIENT_SECRET}\n        issuer: ${OIDC_ISSUER_URL}\n        authHandler: oidcAuthHandler\n        signInResolver: oidcSignInResolver\n\nscaffolding:\n  defaultAuthor:\n    name: Platform Engineering\n    email: platform-engineering@bank.internal\n  defaultCommitMessage: 'Initial commit from Backstage'\n\ncatalog:\n  import:\n    entityFilename: catalog-info.yaml\n    pullRequestBranchName: backstage-integration\n  rules:\n    - allow: [Component, System, API, Resource, Location]\n  locations:\n    # FixOps software catalog\n    - type: url\n      target: https://git.bank.internal/platform/fixops-decision-engine/blob/main/backstage/catalog-info.yaml\n    \n    # Bank platform components\n    - type: url\n      target: https://git.bank.internal/platform/backstage-catalog/blob/main/catalog-index.yaml\n\n# Kubernetes plugin configuration\nkubernetes:\n  serviceLocatorMethod:\n    type: 'multiTenant'\n  clusterLocatorMethods:\n    - type: 'config'\n      clusters:\n        - url: https://k8s-api.bank.internal\n          name: bank-prod-cluster\n          authProvider: 'serviceAccount'\n          serviceAccountToken: ${K8S_SERVICE_ACCOUNT_TOKEN}\n          dashboardUrl: https://k8s-dashboard.bank.internal\n          dashboardApp: standard\n        - url: https://k8s-staging-api.bank.internal\n          name: bank-staging-cluster\n          authProvider: 'serviceAccount'\n          serviceAccountToken: ${K8S_STAGING_TOKEN}\n\n# TechDocs configuration\ntechdocs:\n  builder: 'local'\n  generator:\n    runIn: 'local'\n  publisher:\n    type: 'local'\n\n# Prometheus monitoring\nprometheus:\n  proxyUrl: https://prometheus.bank.internal\n\n# Custom FixOps plugin configuration\nfixops:\n  instances:\n    - name: bank-production\n      url: https://fixops-api.bank.internal\n      description: \"Bank production FixOps instance\"\n    - name: bank-staging\n      url: https://fixops-staging-api.bank.internal\n      description: \"Bank staging FixOps instance\"\n  \n  # Integration settings\n  cicd_integration:\n    supported_pipelines: [\"jenkins\", \"github-actions\", \"azure-devops\"]\n    decision_endpoint: \"/api/v1/cicd/decision\"\n    upload_endpoint: \"/api/v1/scans/upload\"\n    \n  # Monitoring\n  monitoring:\n    prometheus_metrics: true\n    sla_target_seconds: 2.0\n    hot_path_target_us: 299\n    \n  # Bank compliance\n  compliance:\n    frameworks: [\"pci_dss\", \"sox\", \"ffiec\"]\n    evidence_retention_years: 7\n    audit_trail_required: true
